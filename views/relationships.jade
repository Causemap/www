extends situation

block title
  if rel_type == 'effects'
    | Effects of "#{ situation.name }"
  else
    | Causes of "#{ situation.name }"

block situation-content
  .row
    .col-md-12
      .btn-toolbar.padded-tb
        if rel_type == 'effects'
          .toolbar-text.pull-left
            strong Effects
          button.btn.btn-primary.pull-right(
            data-toggle='modal',
            data-target='#add-relationship',
            ng-click='rel_type = "effects"'
          ) Add an Effect
        else
          .toolbar-text.pull-left
            strong Causes
          button.btn.btn-primary.pull-right(
            data-toggle='modal',
            data-target='#add-relationship',
            ng-click='rel_type = "causes"'
          ) Add a Cause

      if rel_type == 'effects'
        if situation.total_effects == 0
          h3.subdued No Effects
          p.subdued
            | Apparently, this situation hasn't effected the universe in any
            | way. Unless it actually has...

          .btn-toolbar
            button.btn.btn-link.btn-block(
              data-toggle='modal',
              data-target='#add-relationship'
              ng-click='rel_type = "effects"'
            ) Add an Effect
        else
          ol.list-unstyled.situations
            - each hit in result.hits.hits
              - var situation = rel_type == 'causes' ? hit._source.cause : hit._source.effect
                li.situation.situation-landscape.relationship-situation
                  +situation_item(situation)

      if rel_type == 'causes'
        if situation.total_causes == 0
          h3.subdued No Causes
          p.subdued Do you know what caused this?

          .btn-toolbar
            button.btn.btn-link.btn-block(
              data-toggle='modal',
              data-target='#add-relationship',
              ng-click='rel_type = "causes"'
            ) Add a Cause
        else
          ol.list-unstyled.situations
            - each relationship in situation.causes
              - var relationship_situation = relationship.cause
                li.situation.relationship-situation.situation-landscape
                  +situation_item(relationship_situation)
