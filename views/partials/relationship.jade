mixin relationship_item(relationship, hide_type, size)
  - var situation = hide_type == 'cause' ? relationship.effect : relationship.cause
  if situation.display_image
    - var img_url = 'http://api.causemap.org:5984/causemap/'+ situation.display_image.change_id +'/'+ situation.display_image.filename

    if !size || size == 'lg'
      a.display-image.loading(
        href='/'+ (situation.alias || situation._id),
        style='background-image: url("'+ img_url +'");'
      )
        img.img-responsive(src=img_url)

    if size == 'md'
      a.display-image.loading(
        href='/'+ (situation.alias || situation._id),
        style='background-image: url("http://api.causemap.org:8008/690x10000/'+ img_url +'");'
      )
        img.img-responsive(src='http://api.causemap.org:8008/690x10000/'+ img_url)

    if size == 'sm'
      a.display-image.loading(
        href='/'+ (situation.alias || situation._id),
        style='background-image: url("http://api.causemap.org:8008/224/'+ img_url +'");'
      )
        img.img-responsive(src='http://api.causemap.org:8008/224/'+ img_url)

  .strength
    button.upvote(
      ng-click='adjustRelationshipStrength("'+relationship._id+'", "up")',
      title='Upvote this relationship'
    )
      i.cm-arrow-66

    button.downvote(
      ng-click='adjustRelationshipStrength("'+relationship._id+'", "down")',
      title='Downvote this relationship'
    )
      i.cm-arrow-65

  .situation-section
    .meta.subdued
      if situation.location
        span.location
          | #{ situation.location }

      if situation.period
        span.period
          | #{ situation.period }

    h4.situation-name
      a.name(href='/'+ (situation.alias || situation._id), title=situation.name)= situation.name

    span.with-dropdown
      a.more.dropdown-toggle(data-toggle='dropdown') More
      ul.dropdown-menu(role='menu')
        li(role='presentation')
          a(data-toggle='modal', data-target='#edit-relationship-desc', ng-click='editing_relationship ="'+ relationship._id +'"; relationship_draft.description ="'+ relationship.description +'"')
            | Edit relationship description
        li(role='presentation')
          a(ng-click='markForDeletion("'+ relationship._id +'")') Delete this relationship
